generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id             String @id
  name           String
  whatsappNumber String
  university     Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Case {
  id           String @id @default(uuid())
  title        String
  complaint    String
  difficulty   Int
  category     Int
  speciality   Int
  name         String
  age          Int
  gender       Int
  weight       Float
  height       Float
  briefHistory String @default("")
  objective    String @default("")
  actor        String @default("")

  bodySystems BodySystem[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model BodySystem {
  id    String          @id @unique
  label BodySystemLabel

  caseId                String
  case                  Case                   @relation(fields: [caseId], references: [id])
  examinationTechniques ExaminationTechnique[]
}

model ExaminationTechnique {
  id    String                    @id @unique
  label ExaminationTechniqueLabel

  bodySystemId     String
  bodySystem       BodySystem        @relation(fields: [bodySystemId], references: [id])
  examinationAreas ExaminationArea[]
}

model ExaminationArea {
  id String @id @unique

  label String

  examinationTechniqueId String
  examinationTecnique    ExaminationTechnique @relation(fields: [examinationTechniqueId], references: [id])
  examinationFindings    ExaminationFinding[]
}

model ExaminationFinding {
  id String @id @unique

  type        ExaminationFindingType
  normal      Boolean?
  description String

  examinationAreaId String
  examinationArea   ExaminationArea @relation(references: [id], fields: [examinationAreaId])
}

enum BodySystemLabel {
  General
  Cardiovascular
  Respiratory
  Abdomen
  Neurological
  Extremities
}

enum ExaminationTechniqueLabel {
  Inspect
  Palpate
  Auscultate
  Percuss
}

enum ExaminationFindingType {
  img
  audio
  video
  text
}
